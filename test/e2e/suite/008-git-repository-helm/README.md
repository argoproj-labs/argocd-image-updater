This test case verifies [possibility to specify write-back GIT Helm repository as annotation](https://argocd-image-updater.readthedocs.io/en/latest/basics/update-methods/#specifying-a-repository-when-using-a-helm-repository-in-repourl).

This test case performs the following steps:
* install ArgoCD Helm Application to the test cluster with GIT write-back method
* run argocd-image-updater
* assert that the expected image was installed
* revert the changes made to git repository 
* uninstall Application from the test cluster

To run this individual test case,

* make sure both docker daemon and k8s cluster is running
* `cd $HOME/go/src/image-updater/test/e2e`
* `SRC_DIR=$HOME/go/src/argocd-image-updater kubectl kuttl test --namespace argocd-image-updater-e2e --timeout 120 --test 008-git-repository-helm`

Test output:
```bash
=== RUN   kuttl
    harness.go:459: starting setup
    harness.go:254: running tests using configured kubeconfig.
    harness.go:277: Successful connection to cluster at: https://127.0.0.1:6443
    harness.go:362: running tests
    harness.go:74: going to run test suite with timeout of 120 seconds for each step
    harness.go:374: testsuite: ./suite has 11 tests
=== RUN   kuttl/harness
=== RUN   kuttl/harness/008-git-repository-helm
=== PAUSE kuttl/harness/008-git-repository-helm
=== CONT  kuttl/harness/008-git-repository-helm
    logger.go:42: 16:34:44 | 008-git-repository-helm | Ignoring README.md as it does not match file name regexp: ^(\d+)-(?:[^\.]+)(?:\.yaml)?$
    logger.go:42: 16:34:44 | 008-git-repository-helm | Ignoring test.yaml as it does not match file name regexp: ^(\d+)-(?:[^\.]+)(?:\.yaml)?$
    logger.go:42: 16:34:44 | 008-git-repository-helm | Skipping creation of user-supplied namespace: argocd-image-updater-e2e
    logger.go:42: 16:34:44 | 008-git-repository-helm/1-install | starting test step 1-install
    logger.go:42: 16:34:44 | 008-git-repository-helm/1-install | Namespace:/image-updater-e2e-008 created
Warning: metadata.finalizers: "resources-finalizer.argocd.argoproj.io": prefer a domain-qualified finalizer name to avoid accidental conflicts with other finalizer writers
    logger.go:42: 16:34:44 | 008-git-repository-helm/1-install | Application:argocd-image-updater-e2e/image-updater-008 created
    logger.go:42: 16:34:46 | 008-git-repository-helm/1-install | test step completed 1-install
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | starting test step 2-run-updater
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | running command: [sh -c ${SRC_DIR}/dist/argocd-image-updater run --once \
          --argocd-namespace argocd-image-updater-e2e \
          --registries-conf-path ${SRC_DIR}/test/e2e/assets/registries.conf \
          --loglevel trace
        ]
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=info msg="argocd-image-updater v99.9.9+d6a78eb starting [loglevel:TRACE, interval:once, healthport:off]"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=warning msg="commit message template at /app/config/commit.template does not exist, using default"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Successfully parsed commit message template"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="rate limiting is disabled" prefix="10.42.0.1:30000" registry="https://10.42.0.1:30000"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=info msg="Loaded 1 registry configurations from /home/dkarpele/go/src/argocd-image-updater/test/e2e/assets/registries.conf"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=info msg="ArgoCD configuration: [apiKind=kubernetes, server=argocd-server.argocd-image-updater-e2e, auth_token=false, insecure=false, grpc_web=false, plaintext=false]"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=info msg="Starting metrics server on TCP port=8081"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=info msg="Warming up image cache"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Applications listed: 1"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="processing app 'argocd-image-updater-e2e/image-updater-008' of type 'Helm'" application=image-updater-008 namespace=argocd-image-updater-e2e
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Processing application argocd-image-updater-e2e/image-updater-008"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Considering this image for update" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="setting rate limit to 20 requests per second" prefix=gcr.io registry="https://gcr.io"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Inferred registry from prefix gcr.io to use API https://gcr.io"
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=debug msg="Using version constraint '0.2' when looking for a new tag" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="Found update strategy digest" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="No match annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="No ignore-tags annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="Using runtime platform constraint linux/amd64" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:46 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:46+01:00" level=trace msg="No pull-secret annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:47 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:47+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/tags/list"
    logger.go:42: 16:34:47 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:47+01:00" level=trace msg="Removing tag 0.1 because it either didn't match defined pattern or is ignored" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:47 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:47+01:00" level=trace msg="Getting manifest for image heptio-images/ks-guestbook-demo:0.2 (operation 1/1)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:47 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:47+01:00" level=trace msg="acquired metadata semaphore" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:47 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:47+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/manifests/0.2"
    logger.go:42: 16:34:48 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:48+01:00" level=trace msg="Manifest digest is edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:48 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:48+01:00" level=trace msg="v2 SHA digest is sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:48 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:48+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/blobs/sha256:edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26"
    logger.go:42: 16:34:48 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:48+01:00" level=trace msg="Performing HTTP GET https://storage.googleapis.com/artifacts.heptio-images.appspot.com/containers/images/sha256:edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="Found date 2017-12-01 23:39:43.092421032 +0000 UTC" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="released semaphore and terminated waitgroup"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="List of available tags found: [0.2]" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="Finding out whether to consider 0.2 for being updateable" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="found 1 from 1 tags eligible for consideration" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=info msg="Setting new image to gcr.io/heptio-images/ks-guestbook-demo:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="target parameters: image-spec= image-name=image.name, image-tag=image.tag" application=image-updater-008 image=gcr.io/heptio-images/ks-guestbook-demo namespace=argocd-image-updater-e2e
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=info msg="Successfully updated image 'gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47' to 'gcr.io/heptio-images/ks-guestbook-demo:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509', but pending spec update (dry run=true)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Using commit message: build: automatic update of image-updater-008\n\nupdates image heptio-images/ks-guestbook-demo tag 'sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47' to 'sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509'\n"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=info msg="Dry run - not committing 1 changes to application" application=image-updater-008
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=info msg="Finished cache warm-up, pre-loaded 1 meta data entries from 3 registries"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Starting askpass server"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Applications listed: 1"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="processing app 'argocd-image-updater-e2e/image-updater-008' of type 'Helm'" application=image-updater-008 namespace=argocd-image-updater-e2e
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=info msg="Starting image update cycle, considering 1 annotated application(s) for update"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Processing application argocd-image-updater-e2e/image-updater-008"
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Considering this image for update" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=debug msg="Using version constraint '0.2' when looking for a new tag" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="Found update strategy digest" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="No match annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="No ignore-tags annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="Using runtime platform constraint linux/amd64" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="No pull-secret annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.2 registry_url=gcr.io
    logger.go:42: 16:34:53 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:53+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/tags/list"
    logger.go:42: 16:34:54 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:54+01:00" level=trace msg="Removing tag 0.1 because it either didn't match defined pattern or is ignored" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:54 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:54+01:00" level=trace msg="Getting manifest for image heptio-images/ks-guestbook-demo:0.2 (operation 1/1)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:54 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:54+01:00" level=trace msg="acquired metadata semaphore" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:54 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:54+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/manifests/0.2"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="Manifest digest is edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="v2 SHA digest is sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/blobs/sha256:edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="Performing HTTP GET https://storage.googleapis.com/artifacts.heptio-images.appspot.com/containers/images/sha256:edb067e7c36c4508264ea75573f637af48e2c8583f00ec1f7081d65652ac1d26"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="Found date 2017-12-01 23:39:43.092421032 +0000 UTC" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="released semaphore and terminated waitgroup"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="List of available tags found: [0.2]" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="Finding out whether to consider 0.2 for being updateable" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=debug msg="found 1 from 1 tags eligible for consideration" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Setting new image to gcr.io/heptio-images/ks-guestbook-demo:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=debug msg="target parameters: image-spec= image-name=image.name, image-tag=image.tag" application=image-updater-008 image=gcr.io/heptio-images/ks-guestbook-demo namespace=argocd-image-updater-e2e
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Successfully updated image 'gcr.io/heptio-images/ks-guestbook-demo@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47' to 'gcr.io/heptio-images/ks-guestbook-demo:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509', but pending spec update (dry run=false)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" registry=gcr.io
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=debug msg="Using commit message: build: automatic update of image-updater-008\n\nupdates image heptio-images/ks-guestbook-demo tag 'sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47' to 'sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509'\n"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Committing 1 parameter update(s) for application image-updater-008" application=image-updater-008
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Starting configmap/secret informers"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Configmap/secret informer synced"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="configmap informer cancelled"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="Initializing https://10.42.0.1:30003/testdata.git to /tmp/git-image-updater-0083671947671"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="secrets informer cancelled"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=trace msg="targetRevision for update is 'master'" application=image-updater-008
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git fetch origin master --force --prune --depth 1" dir=/tmp/git-image-updater-0083671947671 execID=5a357
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git fetch origin master --force --prune --depth 1]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=102.296999
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git checkout --force master" dir=/tmp/git-image-updater-0083671947671 execID=3b24a
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git checkout --force master]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=3.80182
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git clean -ffdx" dir=/tmp/git-image-updater-0083671947671 execID=9d2f0
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git clean -ffdx]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=0.763384
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=debug msg="values: ''" application="&Application{ObjectMeta:{image-updater-008  argocd-image-updater-e2e  0ea27b7e-aa20-43e7-87d5-c175fe63cc19 43715 10 2025-03-19 16:34:44 +0100 CET <nil> <nil> map[] map[argocd-image-updater.argoproj.io/git-branch:master argocd-image-updater.argoproj.io/git-repository:https://10.42.0.1:30003/testdata.git argocd-image-updater.argoproj.io/image-list:test=gcr.io/heptio-images/ks-guestbook-demo:0.2 argocd-image-updater.argoproj.io/test.update-strategy:digest argocd-image-updater.argoproj.io/write-back-method:git] [] [resources-finalizer.argocd.argoproj.io] [{kubectl-kuttl Update argoproj.io/v1alpha1 2025-03-19 16:34:44 +0100 CET FieldsV1 {\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:argocd-image-updater.argoproj.io/git-branch\":{},\"f:argocd-image-updater.argoproj.io/git-repository\":{},\"f:argocd-image-updater.argoproj.io/image-list\":{},\"f:argocd-image-updater.argoproj.io/test.update-strategy\":{},\"f:argocd-image-updater.argoproj.io/write-back-method\":{}},\"f:finalizers\":{\".\":{},\"v:\\\"resources-finalizer.argocd.argoproj.io\\\"\":{}}},\"f:spec\":{\".\":{},\"f:destination\":{\".\":{},\"f:namespace\":{},\"f:server\":{}},\"f:project\":{},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}},\"f:syncPolicy\":{\".\":{},\"f:automated\":{},\"f:retry\":{\".\":{},\"f:limit\":{}}}}} } {argocd-application-controller Update argoproj.io/v1alpha1 2025-03-19 16:34:46 +0100 CET FieldsV1 {\"f:status\":{\".\":{},\"f:controllerNamespace\":{},\"f:health\":{\".\":{},\"f:lastTransitionTime\":{},\"f:status\":{}},\"f:history\":{},\"f:operationState\":{\".\":{},\"f:finishedAt\":{},\"f:message\":{},\"f:operation\":{\".\":{},\"f:initiatedBy\":{\".\":{},\"f:automated\":{}},\"f:retry\":{\".\":{},\"f:limit\":{}},\"f:sync\":{\".\":{},\"f:revision\":{}}},\"f:phase\":{},\"f:startedAt\":{},\"f:syncResult\":{\".\":{},\"f:resources\":{},\"f:revision\":{},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}}}},\"f:reconciledAt\":{},\"f:resources\":{},\"f:sourceHydrator\":{},\"f:sourceType\":{},\"f:summary\":{\".\":{},\"f:images\":{}},\"f:sync\":{\".\":{},\"f:comparedTo\":{\".\":{},\"f:destination\":{\".\":{},\"f:namespace\":{},\"f:server\":{}},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}}},\"f:revision\":{},\"f:status\":{}}}} }]},Spec:ApplicationSpec{Source:&ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:&ApplicationSourceHelm{ValueFiles:[],Parameters:[]HelmParameter{HelmParameter{Name:image.name,Value:gcr.io/heptio-images/ks-guestbook-demo,ForceString:true,},HelmParameter{Name:image.tag,Value:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509,ForceString:true,},},ReleaseName:,Values:,FileParameters:[]HelmFileParameter{},Version:,PassCredentials:false,IgnoreMissingValueFiles:false,SkipCrds:false,ValuesObject:nil,Namespace:,KubeVersion:,APIVersions:[],},Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Destination:ApplicationDestination{Server:https://kubernetes.default.svc,Namespace:image-updater-e2e-008,Name:,},Project:default,SyncPolicy:&SyncPolicy{Automated:&SyncPolicyAutomated{Prune:false,SelfHeal:false,AllowEmpty:false,},SyncOptions:[],Retry:&RetryStrategy{Limit:2,Backoff:nil,},ManagedNamespaceMetadata:nil,},IgnoreDifferences:[]ResourceIgnoreDifferences{},Info:[]Info{},RevisionHistoryLimit:nil,Sources:[]ApplicationSource{},},Status:ApplicationStatus{Resources:[]ResourceStatus{ResourceStatus{Group:,Version:v1,Kind:Service,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Health:&HealthStatus{Status:Healthy,Message:,},Hook:false,RequiresPruning:false,SyncWave:0,},ResourceStatus{Group:apps,Version:v1,Kind:Deployment,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Health:&HealthStatus{Status:Healthy,Message:,},Hook:false,RequiresPruning:false,SyncWave:0,},},Sync:SyncStatus{Status:Synced,ComparedTo:ComparedTo{Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Destination:ApplicationDestination{Server:https://kubernetes.default.svc,Namespace:image-updater-e2e-008,Name:,},Sources:[]ApplicationSource{},IgnoreDifferences:[]ResourceIgnoreDifferences{},},Revision:6be66fc06bb1f2b2965bf212fc7b5d5609e47643,Revisions:[],},Health:HealthStatus{Status:Healthy,Message:,},History:[]RevisionHistory{RevisionHistory{Revision:6be66fc06bb1f2b2965bf212fc7b5d5609e47643,DeployedAt:2025-03-19 16:34:45 +0100 CET,ID:0,Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},DeployStartedAt:2025-03-19 16:34:44 +0100 CET,Sources:[]ApplicationSource{},Revisions:[],InitiatedBy:OperationInitiator{Username:,Automated:true,},},},Conditions:[]ApplicationCondition{},ReconciledAt:2025-03-19 16:34:45 +0100 CET,OperationState:&OperationState{Operation:Operation{Sync:&SyncOperation{Revision:6be66fc06bb1f2b2965bf212fc7b5d5609e47643,Prune:false,DryRun:false,SyncStrategy:nil,Resources:[]SyncOperationResource{},Source:nil,Manifests:[],SyncOptions:[],Sources:[]ApplicationSource{},Revisions:[],SelfHealAttemptsCount:0,},InitiatedBy:OperationInitiator{Username:,Automated:true,},Info:[]*Info{},Retry:RetryStrategy{Limit:2,Backoff:nil,},},Phase:Succeeded,Message:successfully synced (all tasks run),SyncResult:&SyncOperationResult{Resources:[]*ResourceResult{&ResourceResult{Group:,Version:v1,Kind:Service,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Message:service/image-updater-008-008-simple-helm-app created,HookType:,HookPhase:Running,SyncPhase:Sync,},&ResourceResult{Group:apps,Version:v1,Kind:Deployment,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Message:deployment.apps/image-updater-008-008-simple-helm-app created,HookType:,HookPhase:Running,SyncPhase:Sync,},},Revision:6be66fc06bb1f2b2965bf212fc7b5d5609e47643,Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Sources:[]ApplicationSource{},Revisions:[],ManagedNamespaceMetadata:nil,},StartedAt:2025-03-19 16:34:44 +0100 CET,FinishedAt:2025-03-19 16:34:45 +0100 CET,RetryCount:0,},ObservedAt:<nil>,SourceType:Helm,Summary:ApplicationSummary{ExternalURLs:[],Images:[gcr.io/heptio-images/ks-guestbook-demo:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47],},ResourceHealthSource:,SourceTypes:[],ControllerNamespace:argocd-image-updater-e2e,},Operation:nil,}"
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=debug msg="Writing commit message to /tmp/image-updater-commit-msg2486506766" application=image-updater-008
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git config user.name argocd-image-updater" dir=/tmp/git-image-updater-0083671947671 execID=a0f3a
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git config user.name argocd-image-updater]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=0.900063
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git config user.email noreply@argoproj.io" dir=/tmp/git-image-updater-0083671947671 execID=39cce
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git config user.email noreply@argoproj.io]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=0.8043710000000001
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git -c gpg.format=openpgp commit -a -F /tmp/image-updater-commit-msg2486506766" dir=/tmp/git-image-updater-0083671947671 execID=a55db
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg=Trace args="[git -c gpg.format=openpgp commit -a -F /tmp/image-updater-commit-msg2486506766]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=2.9104650000000003
    logger.go:42: 16:34:55 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:55+01:00" level=info msg="git push origin master" dir=/tmp/git-image-updater-0083671947671 execID=5e8d3
    logger.go:42: 16:34:56 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:56+01:00" level=info msg=Trace args="[git push origin master]" dir=/tmp/git-image-updater-0083671947671 operation_name="exec git" time_ms=82.941417
    logger.go:42: 16:34:56 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:56+01:00" level=info msg="Successfully updated the live application spec" application=image-updater-008
    logger.go:42: 16:34:56 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:56+01:00" level=info msg="Processing results: applications=1 images_considered=1 images_skipped=0 images_updated=1 errors=0"
    logger.go:42: 16:34:56 | 008-git-repository-helm/2-run-updater | time="2025-03-19T16:34:56+01:00" level=info msg=Finished.
    logger.go:42: 16:35:43 | 008-git-repository-helm/2-run-updater | test step completed 2-run-updater
    logger.go:42: 16:35:43 | 008-git-repository-helm/3-run-updater-revert | starting test step 3-run-updater-revert
    logger.go:42: 16:35:43 | 008-git-repository-helm/3-run-updater-revert | running command: [sh -c kubectl patch -n $NAMESPACE application image-updater-008 \
          --type=merge \
          --patch='{"metadata": {"annotations": {"argocd-image-updater.argoproj.io/image-list": "test=gcr.io/heptio-images/ks-guestbook-demo:0.1"}}}'
        ]
    logger.go:42: 16:35:43 | 008-git-repository-helm/3-run-updater-revert | application.argoproj.io/image-updater-008 patched
    logger.go:42: 16:35:43 | 008-git-repository-helm/3-run-updater-revert | running command: [sh -c sleep 2
        ]
    logger.go:42: 16:35:45 | 008-git-repository-helm/3-run-updater-revert | running command: [sh -c ${SRC_DIR}/dist/argocd-image-updater run --once \
          --argocd-namespace argocd-image-updater-e2e \
          --registries-conf-path ${SRC_DIR}/test/e2e/assets/registries.conf \
          --loglevel trace
        ]
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=info msg="argocd-image-updater v99.9.9+d6a78eb starting [loglevel:TRACE, interval:once, healthport:off]"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=warning msg="commit message template at /app/config/commit.template does not exist, using default"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Successfully parsed commit message template"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="rate limiting is disabled" prefix="10.42.0.1:30000" registry="https://10.42.0.1:30000"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=info msg="Loaded 1 registry configurations from /home/dkarpele/go/src/argocd-image-updater/test/e2e/assets/registries.conf"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=info msg="ArgoCD configuration: [apiKind=kubernetes, server=argocd-server.argocd-image-updater-e2e, auth_token=false, insecure=false, grpc_web=false, plaintext=false]"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=info msg="Starting metrics server on TCP port=8081"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=info msg="Warming up image cache"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Applications listed: 1"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="processing app 'argocd-image-updater-e2e/image-updater-008' of type 'Helm'" application=image-updater-008 namespace=argocd-image-updater-e2e
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Processing application argocd-image-updater-e2e/image-updater-008"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Considering this image for update" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="setting rate limit to 20 requests per second" prefix=gcr.io registry="https://gcr.io"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Inferred registry from prefix gcr.io to use API https://gcr.io"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=debug msg="Using version constraint '0.1' when looking for a new tag" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Found update strategy digest" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="No match annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="No ignore-tags annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Using runtime platform constraint linux/amd64" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="No pull-secret annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/tags/list"
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Removing tag 0.2 because it either didn't match defined pattern or is ignored" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Getting manifest for image heptio-images/ks-guestbook-demo:0.1 (operation 1/1)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="acquired metadata semaphore" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:46 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:46+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/manifests/0.1"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Manifest digest is 5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="v2 SHA digest is sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/blobs/sha256:5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Performing HTTP GET https://storage.googleapis.com/artifacts.heptio-images.appspot.com/containers/images/sha256:5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Found date 2017-12-01 23:06:12.607835588 +0000 UTC" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="released semaphore and terminated waitgroup"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="List of available tags found: [0.1]" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Finding out whether to consider 0.1 for being updateable" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="found 1 from 1 tags eligible for consideration" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=info msg="Setting new image to gcr.io/heptio-images/ks-guestbook-demo:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="target parameters: image-spec= image-name=image.name, image-tag=image.tag" application=image-updater-008 image=gcr.io/heptio-images/ks-guestbook-demo namespace=argocd-image-updater-e2e
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=info msg="Successfully updated image 'gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509' to 'gcr.io/heptio-images/ks-guestbook-demo:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47', but pending spec update (dry run=true)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Using commit message: build: automatic update of image-updater-008\n\nupdates image heptio-images/ks-guestbook-demo tag 'sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509' to 'sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47'\n"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=info msg="Dry run - not committing 1 changes to application" application=image-updater-008
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=info msg="Finished cache warm-up, pre-loaded 1 meta data entries from 3 registries"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Starting askpass server"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Applications listed: 1"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="processing app 'argocd-image-updater-e2e/image-updater-008' of type 'Helm'" application=image-updater-008 namespace=argocd-image-updater-e2e
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=info msg="Starting image update cycle, considering 1 annotated application(s) for update"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Processing application argocd-image-updater-e2e/image-updater-008"
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Considering this image for update" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=debug msg="Using version constraint '0.1' when looking for a new tag" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Found update strategy digest" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="No match annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="No ignore-tags annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Using runtime platform constraint linux/amd64" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="No pull-secret annotation found" image_alias=test image_digest= image_name=gcr.io/heptio-images/ks-guestbook-demo image_tag=0.1 registry_url=gcr.io
    logger.go:42: 16:35:47 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:47+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/tags/list"
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="Removing tag 0.2 because it either didn't match defined pattern or is ignored" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="Getting manifest for image heptio-images/ks-guestbook-demo:0.1 (operation 1/1)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="acquired metadata semaphore" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/manifests/0.1"
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="Manifest digest is 5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="v2 SHA digest is sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:48 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:48+01:00" level=trace msg="Performing HTTP GET https://gcr.io/v2/heptio-images/ks-guestbook-demo/blobs/sha256:5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="Performing HTTP GET https://storage.googleapis.com/artifacts.heptio-images.appspot.com/containers/images/sha256:5702e5c04c08214c2c52bd9a1213ec9320186d0d34644aee8763663fe8e5128a"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="Found date 2017-12-01 23:06:12.607835588 +0000 UTC" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="released semaphore and terminated waitgroup"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="List of available tags found: [0.1]" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="Finding out whether to consider 0.1 for being updateable" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=debug msg="found 1 from 1 tags eligible for consideration" image="gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Setting new image to gcr.io/heptio-images/ks-guestbook-demo:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=debug msg="target parameters: image-spec= image-name=image.name, image-tag=image.tag" application=image-updater-008 image=gcr.io/heptio-images/ks-guestbook-demo namespace=argocd-image-updater-e2e
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Successfully updated image 'gcr.io/heptio-images/ks-guestbook-demo@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509' to 'gcr.io/heptio-images/ks-guestbook-demo:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47', but pending spec update (dry run=false)" alias=test application=image-updater-008 image_name=heptio-images/ks-guestbook-demo image_tag="sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509" registry=gcr.io
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=debug msg="Using commit message: build: automatic update of image-updater-008\n\nupdates image heptio-images/ks-guestbook-demo tag 'sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509' to 'sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47'\n"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Committing 1 parameter update(s) for application image-updater-008" application=image-updater-008
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Starting configmap/secret informers"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Configmap/secret informer synced"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Initializing https://10.42.0.1:30003/testdata.git to /tmp/git-image-updater-0081193446331"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="secrets informer cancelled"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="configmap informer cancelled"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=trace msg="targetRevision for update is 'master'" application=image-updater-008
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git fetch origin master --force --prune --depth 1" dir=/tmp/git-image-updater-0081193446331 execID=1fa4a
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git fetch origin master --force --prune --depth 1]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=110.982745
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git checkout --force master" dir=/tmp/git-image-updater-0081193446331 execID=c9b6f
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git checkout --force master]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=4.292879
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git clean -ffdx" dir=/tmp/git-image-updater-0081193446331 execID=68e11
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git clean -ffdx]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=0.821551
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=debug msg="values: ''" application="&Application{ObjectMeta:{image-updater-008  argocd-image-updater-e2e  0ea27b7e-aa20-43e7-87d5-c175fe63cc19 43788 19 2025-03-19 16:34:44 +0100 CET <nil> <nil> map[] map[argocd-image-updater.argoproj.io/git-branch:master argocd-image-updater.argoproj.io/git-repository:https://10.42.0.1:30003/testdata.git argocd-image-updater.argoproj.io/image-list:test=gcr.io/heptio-images/ks-guestbook-demo:0.1 argocd-image-updater.argoproj.io/test.update-strategy:digest argocd-image-updater.argoproj.io/write-back-method:git] [] [resources-finalizer.argocd.argoproj.io] [{kubectl-kuttl Update argoproj.io/v1alpha1 2025-03-19 16:34:44 +0100 CET FieldsV1 {\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:argocd-image-updater.argoproj.io/git-branch\":{},\"f:argocd-image-updater.argoproj.io/git-repository\":{},\"f:argocd-image-updater.argoproj.io/test.update-strategy\":{},\"f:argocd-image-updater.argoproj.io/write-back-method\":{}},\"f:finalizers\":{\".\":{},\"v:\\\"resources-finalizer.argocd.argoproj.io\\\"\":{}}},\"f:spec\":{\".\":{},\"f:destination\":{\".\":{},\"f:namespace\":{},\"f:server\":{}},\"f:project\":{},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}},\"f:syncPolicy\":{\".\":{},\"f:automated\":{},\"f:retry\":{\".\":{},\"f:limit\":{}}}}} } {argocd-application-controller Update argoproj.io/v1alpha1 2025-03-19 16:35:43 +0100 CET FieldsV1 {\"f:status\":{\".\":{},\"f:controllerNamespace\":{},\"f:health\":{\".\":{},\"f:lastTransitionTime\":{},\"f:status\":{}},\"f:history\":{},\"f:operationState\":{\".\":{},\"f:finishedAt\":{},\"f:message\":{},\"f:operation\":{\".\":{},\"f:initiatedBy\":{\".\":{},\"f:automated\":{}},\"f:retry\":{\".\":{},\"f:limit\":{}},\"f:sync\":{\".\":{},\"f:revision\":{}}},\"f:phase\":{},\"f:startedAt\":{},\"f:syncResult\":{\".\":{},\"f:resources\":{},\"f:revision\":{},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}}}},\"f:reconciledAt\":{},\"f:resources\":{},\"f:sourceHydrator\":{},\"f:sourceType\":{},\"f:summary\":{\".\":{},\"f:images\":{}},\"f:sync\":{\".\":{},\"f:comparedTo\":{\".\":{},\"f:destination\":{\".\":{},\"f:namespace\":{},\"f:server\":{}},\"f:source\":{\".\":{},\"f:path\":{},\"f:repoURL\":{},\"f:targetRevision\":{}}},\"f:revision\":{},\"f:status\":{}}}} } {kubectl-patch Update argoproj.io/v1alpha1 2025-03-19 16:35:43 +0100 CET FieldsV1 {\"f:metadata\":{\"f:annotations\":{\"f:argocd-image-updater.argoproj.io/image-list\":{}}}} }]},Spec:ApplicationSpec{Source:&ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:&ApplicationSourceHelm{ValueFiles:[],Parameters:[]HelmParameter{HelmParameter{Name:image.name,Value:gcr.io/heptio-images/ks-guestbook-demo,ForceString:true,},HelmParameter{Name:image.tag,Value:0.1@sha256:fe18e00a6aeece16b5b2f77a32ee60929e8a60e27c71df8df66bf804f5677f47,ForceString:true,},},ReleaseName:,Values:,FileParameters:[]HelmFileParameter{},Version:,PassCredentials:false,IgnoreMissingValueFiles:false,SkipCrds:false,ValuesObject:nil,Namespace:,KubeVersion:,APIVersions:[],},Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Destination:ApplicationDestination{Server:https://kubernetes.default.svc,Namespace:image-updater-e2e-008,Name:,},Project:default,SyncPolicy:&SyncPolicy{Automated:&SyncPolicyAutomated{Prune:false,SelfHeal:false,AllowEmpty:false,},SyncOptions:[],Retry:&RetryStrategy{Limit:2,Backoff:nil,},ManagedNamespaceMetadata:nil,},IgnoreDifferences:[]ResourceIgnoreDifferences{},Info:[]Info{},RevisionHistoryLimit:nil,Sources:[]ApplicationSource{},},Status:ApplicationStatus{Resources:[]ResourceStatus{ResourceStatus{Group:,Version:v1,Kind:Service,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Health:&HealthStatus{Status:Healthy,Message:,},Hook:false,RequiresPruning:false,SyncWave:0,},ResourceStatus{Group:apps,Version:v1,Kind:Deployment,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Health:&HealthStatus{Status:Healthy,Message:,},Hook:false,RequiresPruning:false,SyncWave:0,},},Sync:SyncStatus{Status:Synced,ComparedTo:ComparedTo{Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Destination:ApplicationDestination{Server:https://kubernetes.default.svc,Namespace:image-updater-e2e-008,Name:,},Sources:[]ApplicationSource{},IgnoreDifferences:[]ResourceIgnoreDifferences{},},Revision:c126f30af93d1e183ea46cc7190c42a168747e53,Revisions:[],},Health:HealthStatus{Status:Healthy,Message:,},History:[]RevisionHistory{RevisionHistory{Revision:6be66fc06bb1f2b2965bf212fc7b5d5609e47643,DeployedAt:2025-03-19 16:34:45 +0100 CET,ID:0,Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},DeployStartedAt:2025-03-19 16:34:44 +0100 CET,Sources:[]ApplicationSource{},Revisions:[],InitiatedBy:OperationInitiator{Username:,Automated:true,},},RevisionHistory{Revision:c126f30af93d1e183ea46cc7190c42a168747e53,DeployedAt:2025-03-19 16:35:41 +0100 CET,ID:1,Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},DeployStartedAt:2025-03-19 16:35:41 +0100 CET,Sources:[]ApplicationSource{},Revisions:[],InitiatedBy:OperationInitiator{Username:,Automated:true,},},},Conditions:[]ApplicationCondition{},ReconciledAt:2025-03-19 16:35:41 +0100 CET,OperationState:&OperationState{Operation:Operation{Sync:&SyncOperation{Revision:c126f30af93d1e183ea46cc7190c42a168747e53,Prune:false,DryRun:false,SyncStrategy:nil,Resources:[]SyncOperationResource{},Source:nil,Manifests:[],SyncOptions:[],Sources:[]ApplicationSource{},Revisions:[],SelfHealAttemptsCount:0,},InitiatedBy:OperationInitiator{Username:,Automated:true,},Info:[]*Info{},Retry:RetryStrategy{Limit:2,Backoff:nil,},},Phase:Succeeded,Message:successfully synced (all tasks run),SyncResult:&SyncOperationResult{Resources:[]*ResourceResult{&ResourceResult{Group:,Version:v1,Kind:Service,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Message:service/image-updater-008-008-simple-helm-app unchanged,HookType:,HookPhase:Running,SyncPhase:Sync,},&ResourceResult{Group:apps,Version:v1,Kind:Deployment,Namespace:image-updater-e2e-008,Name:image-updater-008-008-simple-helm-app,Status:Synced,Message:deployment.apps/image-updater-008-008-simple-helm-app configured,HookType:,HookPhase:Running,SyncPhase:Sync,},},Revision:c126f30af93d1e183ea46cc7190c42a168747e53,Source:ApplicationSource{RepoURL:https://10.42.0.1:30003/testdata.git,Path:./008-simple-helm-app,TargetRevision:HEAD,Helm:nil,Kustomize:nil,Directory:nil,Plugin:nil,Chart:,Ref:,},Sources:[]ApplicationSource{},Revisions:[],ManagedNamespaceMetadata:nil,},StartedAt:2025-03-19 16:35:41 +0100 CET,FinishedAt:2025-03-19 16:35:41 +0100 CET,RetryCount:0,},ObservedAt:<nil>,SourceType:Helm,Summary:ApplicationSummary{ExternalURLs:[],Images:[gcr.io/heptio-images/ks-guestbook-demo:0.2@sha256:e6fbd640820c32c847a53b93eb7b404f25ffb56df1cc16d0711eec3a405d6509],},ResourceHealthSource:,SourceTypes:[],ControllerNamespace:argocd-image-updater-e2e,},Operation:nil,}"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=debug msg="Writing commit message to /tmp/image-updater-commit-msg3394263299" application=image-updater-008
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git config user.name argocd-image-updater" dir=/tmp/git-image-updater-0081193446331 execID=f103a
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git config user.name argocd-image-updater]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=0.8061010000000001
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git config user.email noreply@argoproj.io" dir=/tmp/git-image-updater-0081193446331 execID=c7e5b
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git config user.email noreply@argoproj.io]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=0.723345
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git -c gpg.format=openpgp commit -a -F /tmp/image-updater-commit-msg3394263299" dir=/tmp/git-image-updater-0081193446331 execID=b61bc
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git -c gpg.format=openpgp commit -a -F /tmp/image-updater-commit-msg3394263299]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=3.146353
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="git push origin master" dir=/tmp/git-image-updater-0081193446331 execID=73d03
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Trace args="[git push origin master]" dir=/tmp/git-image-updater-0081193446331 operation_name="exec git" time_ms=81.520915
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Successfully updated the live application spec" application=image-updater-008
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg="Processing results: applications=1 images_considered=1 images_skipped=0 images_updated=1 errors=0"
    logger.go:42: 16:35:49 | 008-git-repository-helm/3-run-updater-revert | time="2025-03-19T16:35:49+01:00" level=info msg=Finished.
    logger.go:42: 16:35:53 | 008-git-repository-helm/3-run-updater-revert | test step completed 3-run-updater-revert
    logger.go:42: 16:35:53 | 008-git-repository-helm/99-delete | starting test step 99-delete
    logger.go:42: 16:35:59 | 008-git-repository-helm/99-delete | test step completed 99-delete
    logger.go:42: 16:35:59 | 008-git-repository-helm | skipping kubernetes event logging
=== NAME  kuttl
    harness.go:403: run tests finished
    harness.go:510: cleaning up
    harness.go:567: removing temp folder: ""
--- PASS: kuttl (74.15s)
    --- PASS: kuttl/harness (0.00s)
        --- PASS: kuttl/harness/008-git-repository-helm (74.14s)
PASS
```